#!/usr/bin/env bash
set -euo pipefail

TEMP=3700
GAMMASTEP_CMD=(gammastep -m wayland -O "$TEMP")

if ! command -v gammastep >/dev/null 2>&1; then
    echo "gammastep not found" >&2
    exit 1
fi

if pgrep -x gammastep >/dev/null 2>&1; then
    gammastep -x >/dev/null 2>&1 || true
    pkill -x gammastep
else
    setsid -f "${GAMMASTEP_CMD[@]}" >/dev/null 2>&1
fi
